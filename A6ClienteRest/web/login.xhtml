<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
    <h:head>
        <title>Facelet Title</title>
          <meta charset="utf-8"/>
   
   <meta name="google-signin-scope" content="profile email"/>
   <meta name="google-signin-client_id" content="494811373965-kbn43cmu19kuur5okrbq49nj2qdfnifu.apps.googleusercontent.com"/>
    
    <script src="https://apis.google.com/js/platform.js" ></script>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </h:head>
    <h:body>
       
        
    
    <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
    <script>
      function onSignIn(googleUser) {
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();
        $('#apli').css('display','inline-block');
        var x=profile.getEmail().toString();
        document.getElementById("formId:correo").value=x;
         
      };
    </script> 
    <a href="#" onclick="signOut();">Sign out</a>
     <h:form id="formId">
        <h:inputHidden id="correo" value="#{configurationSessionBeans.user}"/>
 
        <h:commandButton id="apli" value="Aplicación" action="#{configurationSessionBeans.goAplicacion()}">
        </h:commandButton><br/>
        
        <h:outputLabel id="error" value="#{configurationSessionBeans.error}"/>
          
                  
        </h:form>
    
<script>
  function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      $('#apli').css('display','none');
      document.getElementById("formId:error").value="Debes iniciar sesión";
      location.reload();
    });
  }
</script> 
        
    </h:body>
</html>

